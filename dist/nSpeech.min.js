var nSpeech=function(){"use strict";/*!
 * nSpeech
 * nSpeech is screen reader library.
 *
 * https://github.com/nkhr7/nSpeech/
 *
 * Copyright 2017, Koichi Yoshimoto
 *
 * Version: 1.0.3
 *
 * Licensed under MIT
 *
 * Released on: 2017.10.11
 */
function n(e,t){if("undefined"!=typeof SpeechSynthesisUtterance){var o=Object.create(n.prototype),c=void 0!==e?e:".speech",r=[],u=window.speechSynthesis;"object"==typeof e&&(t=c,c=".speech"),o.options={lang:"",voice:null,volume:1,rate:1,pitch:1,text:"",onboundary:function(){},onend:function(){g()},onerror:function(){},onmark:function(){},onpause:function(){},onresume:function(){},onstart:function(){},debug:!1},o.elements=[],o.utterance=new window.SpeechSynthesisUtterance;var i="",a=function(){o.elements=s(c),f(),p(t),r.length>0&&(l(),m(),d())},s=function(n){return document.querySelectorAll(n)},f=function(){r=u.getVoices()},p=function(n){"object"==typeof n&&Object.keys(n).forEach(function(e){o.options[e]=n[e]})},l=function(){var n={};if(r.length>0)for(var e in r){if(r[e].lang===o.options.lang)return o.options.voice=r[e],!0;!0===r[e].default&&(n=r[e])}return o.options.voice=n,!1},m=function(){for(var n=h(o.options.text),e=o.elements.length,t=0;t<e;++t){var c;c="INPUT"===o.elements[t].tagName||"TEXTAREA"===o.elements[t].tagName?o.elements[t].value:o.elements[t].textContent,n+=h(c)+" "}o.options.text=n},d=function(){o.utterance.voice=o.options.voice,o.utterance.volume=o.options.volume,o.utterance.rate=o.options.rate,o.utterance.pitch=o.options.pitch,o.utterance.text=o.options.text,o.utterance.onboundary=o.options.onboundary,o.utterance.onend=o.options.onend,o.utterance.onerror=o.options.onerror,o.utterance.onmark=o.options.onmark,o.utterance.onpause=o.options.onpause,o.utterance.onresume=o.options.onresume,o.utterance.onstart=o.options.onstart,o.options.debug&&console.log(o.utterance)},h=function(n){var e="",t=/[\n\r]+|[\s]{2,}/g;return void 0!==n&&"string"==typeof n&&(e=n.replace(t," ").trim()),e},y=function(){var n="";return""!==(n=window.getSelection?window.getSelection().toString():document.selection.createRange().text)&&(i=o.utterance.text,o.utterance.text=n,!0)},g=function(){return""!==i&&(o.utterance.text=i,!0)};return o.play=function(){null===o.options.voice&&a(),y(),u.speak(o.utterance)},o.pause=function(){u.pause(o.utterance)},o.resume=function(){u.resume(o.utterance)},o.stop=function(){g(),u.cancel()},o.replaceText=function(n){o.utterance.text=n},o.changeVolume=function(n){o.utterance.volume=n},o.changeRate=function(n){o.utterance.rate=n},o.changePitch=function(n){o.utterance.pitch=n},o.onboundary=function(n){"function"==typeof n&&p({onboundary:n})},o.onend=function(n){g(),"function"==typeof n&&p({onend:n})},o.onerror=function(n){"function"==typeof n&&p({onerror:n})},o.onmark=function(n){"function"==typeof n&&p({onmark:n})},o.onpause=function(n){"function"==typeof n&&p({onpause:n})},o.onresume=function(n){"function"==typeof n&&p({onresume:n})},o.onstart=function(n){"function"==typeof n&&p({onstart:n})},window.onbeforeunload=function(){o.stop()},window.speechSynthesis.onvoiceschanged=function(){a()},a(),o}alert("音声読み上げに未対応なブラウザです。\n\n音声読み上げ可能ブラウザ\nGoogle Chrome、Safari、Opera")}return n}();
